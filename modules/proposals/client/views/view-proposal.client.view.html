<section class="detail">

	<div class="container">
		<div class="row">
			<div class="col-xs-12 text-right">
				<div>
					<label class="label-danger" ng-if="vm.proposal.project.isPublished && vm.canEdit && !vm.proposal.isPublished" uib-tooltip="No one can see this page until you publish it.">
					<i class="fa fa-exclamation-triangle" ></i> UNPUBLISHED
					</label>
				</div>
				<div class="btn-group">
					<button type="button" class="btn btn-default" ng-if="vm.canEdit" ui-sref="proposaladmin.edit({proposalId:vm.proposal.code})" uib-tooltip="Edit this page">
					<i class="glyphicon glyphicon-edit"></i> Edit
					</button>
					<a href="javascript:void(0);" ng-if="vm.proposal.project.isPublished && vm.canEdit && vm.proposal.isPublished" class="btn btn-default" ng-click="vm.publish(false)" uib-tooltip="Right now, this proposal is live and anyone can view it. You can unpublish it here.">
					<i class="glyphicon glyphicon-ban-circle"></i> Unpublish
					</a>
					<a href="javascript:void(0);" ng-if="vm.proposal.project.isPublished && vm.canEdit && !vm.proposal.isPublished" class="btn btn-default" ng-click="vm.publish(true)" uib-tooltip="Ready to publish this proposal to the world?">
					<i class="glyphicon glyphicon-check"></i> Publish
					</a>
				</div>
			</div>

		<div class="row" style="padding-top: 0px; margin-top: 0px;">
			<div class="col-xs-12 text-center" style="margin-top: 0px; padding-top: 0px;">
				<label class="label-counter" uib-tooltip="This proposal has been viewed {{vm.pageViews}} times">
				<i class="glyphicon glyphicon-heart-empty"></i> {{vm.pageViews}}
				</label>
				<h1>{{vm.proposal.name}}</h1>
				<p style="font-size: 16px; padding-bottom: 30px;"><span ng-bind="vm.proposal.short"></span></p>
			</div>
		</div>
	</div>


	<!--<div class="panel panel-default panel-flat card-panel">-->

<div class="card card-flat">
	<div class="card-header">
		<div class="row">
			<div class="col-sm-5">
				<h5 class="card-title" style="font-family: sans-serif; font-size: 20px;"><b>{{vm.proposal.earn|currency}}</b></h5>
				<h4 ng-if="vm.proposal.isPublished" style="padding-top: 0; margin-top: 0px; margin-bottom: 10px;">Closing in:  <span style="font-size: 18px; font-weight: 800;"> {{vm.closing}}</span></h4>
				<h4 style="padding-top: 0; margin-top: 0px; margin-bottom: 10px;"><i class="fa fa-map-marker">&nbsp;</i>Location</h4>
          <h4 ng-if="vm.proposal.onsite == 'offsite'"><i class="fa fa-user">&nbsp;</i><i class="fa fa-cloud">&nbsp;</i>In-person work NOT required &nbsp; &nbsp;</h4>
          <h4 ng-if="vm.proposal.onsite == 'onsite'" ><i class="fa fa-user">&nbsp;</i><i class="fa fa-building">&nbsp;</i>In-person work required &nbsp; &nbsp;</h4>
          <h4 ng-if="vm.proposal.onsite == 'mixed'"  ><i class="fa fa-user"></i>&nbsp;<i class="fa fa-cloud">&nbsp;</i><i class="fa fa-building">&nbsp;</i>Some in-person work required</h4>
			</div>

			<div class="col-sm-7">
				<dl class="dl-horizontal">
				<dt>Posted by:</dt>
				<dd>
					<i class="fa fa-user-circle-o"></i>
					<span ng-if="vm.proposal.createdBy" ng-bind="vm.proposal.createdBy.displayName"></span>
					<span ng-if="!vm.proposal.createdBy">Deleted User</span>
				</dd>
				<dt>Program:</dt>
				<dd>
					<a ng-if="vm.proposal.program" ui-sref="programs.view({programId:vm.proposal.program.code})"><i class="fa fa-university"></i> {{vm.proposal.program.title}}</a>
					<span ng-if="!vm.proposal.program" class="text-muted">No program</span>
				</dd>
				<dt>Project:</dt>
				<dd>
					<a ng-if="vm.proposal.project" ui-sref="projects.view({projectId:vm.proposal.project.code})"><i class="fa fa-pie-chart"></i> {{vm.proposal.project.name}}</a>
					<span ng-if="!vm.proposal.project" class="text-muted">No project</span>
				</dd>
				<!-- github link -->
				<dt>Code:</dt>
				<dd>
				<a ng-if="vm.proposal.github && vm.proposal.github.length > 0"><a href="{{vm.proposal.github}}" rel="nofollow" target="_blank"><i class="fa fa-github"></i> View Issue on Github</a>
				<!--<dt>Assigned to:</dt>
				<dd>
					<span ng-if="vm.proposal.assignedTo" ng-bind="vm.proposal.assignedTo.displayName"></span>
					<span ng-if="!vm.proposal.assignedTo" class="text-muted">Not assigned</span>-->
				</dl>
			</div>
			<div class="col-sm-12"
				<dl ng-if="vm.proposal.skills.length">
					<!--<dt>Required Skills:</dt>-->
					<dd class="label-list">
					<span class="label label-warning" ng-repeat="code in vm.proposal.skills">{{code}}</span>
					</dd>
				</dl>
			</div>
		</div>
	</div>

	<div class="panel-body" style="background-color: #e6e6e6;">
		<p style="font-size: 16px; color: black; padding-top: 10px;">
		This is a <b>fixed-price</b> proposal governed by the <a href="https://github.com/BCDevExchange/devex/raw/master/Code-with-Us%20Terms_BC%20Developers%20Exchange.pdf">terms</a> of our lightweight procurement model, <i><a href="/codewithus">Code With Us</a></i>.
		</p>
	</div>

	<div class="panel-body">
		<p ng-bind-html="vm.display.description"></p>
	</div>

	<div class="panel-body" style="background-color: #f2f2f2">
		<h5>Acceptance Criteria</h5>
		<p ng-bind-html="vm.display.criteria"></p>
	</div>

<!--
	<core-member-list     title="Assignees" model="vm.proposal" idstring="vm.idString" service="vm.ProposalsService"></core-member-list>
	<core-member-requests title="Applicants" model="vm.proposal" idstring="vm.idString" service="vm.ProposalsService" ng-if="vm.proposal.userIs.admin"></core-member-requests>
-->

	<div class="panel-body style">
		<h5>How to Apply</h5>
		<p>Please send a proposal to <b>{{vm.proposal.proposalEmail}}</b> by <b>{{vm.deadline}}</b>.</p>
		<p>With your email, to indicate your acceptance of the <i>Code With Us</i> terms, you must attach a copy of the <a href="https://github.com/BCDevExchange/devex/raw/master/Code-with-Us%20Terms_BC%20Developers%20Exchange.pdf">terms</a> with the required information asked for in the "Acceptance" section of the document.</p>
		<p>If we are satisfied with the proposals we receive, we will assign this proposal by <b>{{vm.assignment}}</b> with work proposed to start on <b>{{vm.start}}</b>.</p>
		<br>
		<h5>Proposal Evaluation Criteria</h5>
		<p ng-bind-html="vm.display.evaluation"></p>
		<br>
	</div>

	<div class="panel-body" style="background-color: #f2f2f2; text-align: center;">
		<h5><i class="fa fa-comments fa-2x"></i>&nbsp; Questions?</h5>
		<p style="font-size: 16px; font-weight: 500">
		<a href="{{vm.proposal.github}}" rel="nofollow" target="_blank">Visit the GitHub issue for this proposal</a> and post a comment.
		</p>
	</div>

<!--
		<button ng-if="!vm.loggedIn" class="btn btn-solo btn-success btn-lg" ng-click="vm.signInAndApply()" title="Apply">
			<i class="fa fa-sign-in"></i> Sign up or log in to apply
		</button>
		<button ng-if="vm.canApply" class="btn btn-solo btn-success btn-lg" href="javascript:void(0);" ng-click="vm.request()" title="Apply">
			<i class="fa fa-sign-in"></i> Apply Now
		</button>
-->


	<div class="panel-footer" style="background-color: #f2f2f2">
		<em class="small text-muted">
			Created on
			<span ng-bind="vm.proposal.created | date:'mediumDate'"></span>
			by
			<span ng-if="vm.proposal.createdBy" ng-bind="vm.proposal.createdBy.displayName"></span>
			<span ng-if="!vm.proposal.createdBy">Deleted User</span>
		</em><br/>
		<em class="small text-muted">
			Updated on
			<span ng-bind="vm.proposal.updated | date:'mediumDate'"></span>
			by
			<span ng-if="vm.proposal.updatedBy" ng-bind="vm.proposal.updatedBy.displayName"></span>
			<span ng-if="!vm.proposal.updatedBy">Deleted User</span>
		</em><br>
	</div>

</div>


	<div class="col-xs-12 text-right">
		<div style="text-align: right;">
			<label class="label-danger" ng-if="vm.proposal.project.isPublished && vm.canEdit && !vm.proposal.isPublished" uib-tooltip="No one can see this page until you publish it."><i class="fa fa-exclamation-triangle" ></i> UNPUBLISHED
			</label>
		</div>
		<div class="btn-group">
			<button type="button" class="btn btn-default" ng-if="vm.canEdit" ui-sref="proposaladmin.edit({proposalId:vm.proposal.code})" uib-tooltip="Edit this page">
				<i class="glyphicon glyphicon-edit"></i> Edit
			</button>
			<a href="javascript:void(0);" ng-if="vm.proposal.project.isPublished && vm.canEdit && vm.proposal.isPublished" class="btn btn-default" ng-click="vm.publish(false)" uib-tooltip="Right now, this proposal is live and anyone can view it. You can unpublish it here.">
				<i class="glyphicon glyphicon-ban-circle"></i> Unpublish
			</a>
			<a href="javascript:void(0);" ng-if="vm.proposal.project.isPublished && vm.canEdit && !vm.proposal.isPublished" class="btn btn-default" ng-click="vm.publish(true)" uib-tooltip="Ready to publish this proposal to the world?">
				<i class="glyphicon glyphicon-check"></i> Publish
			</a>
		</div>
	</div>

</div>
</section>
